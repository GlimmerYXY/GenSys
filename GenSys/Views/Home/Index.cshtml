@{
    ViewBag.Title = "Home Page";
}
@section css {
    <link href="~/Scripts/Bootstrap-Table-1.5.0/bootstrap-table.min.css" rel="stylesheet" />
    <style type="text/css">
    </style>
}

<div class="row">
    <div class="col-md-2">
        <div id="tree" style="width:150px"></div>
    </div>
    <div class="col-md-10">
        <div class="row">
            <div id="logout"><button type="button" onclick="logout()">reload</button></div><br>
            <!--Control part-->
            <div class="liveCenter" id="liveOcx"></div>
        </div>
        <div class="row">
            <table id="table-javascript"></table>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <script>
        var tree = $('#tree').tree({
            primaryKey: 'id',
            dataSource: [{ text: '磨溪', children: [{ text: '井口区' }, { text: '装置区' }, { text: '大门口' }] }],
            imageUrlField: 'flagUrl'
        });
        var node = tree.getNodeByText('磨溪');
        tree.expand(node);
    </script>

    <script type="text/javascript" src="/Scripts/camera/LAB.min.js"></script>
    <script type="text/javascript" for="ipcocx" event="SendMsgToWeb(strMsg)">
        SendMsgToWeb(strMsg);
    </script>
    <script type="text/javascript">
        $LAB.script("/Scripts/camera/pluginVersion.js?version=" + (new Date).getTime())
            .wait(function () {
                $LAB.script("/Scripts/camera/jquery-1.11.1.min.js")
                    //                            .script("~/js/json.js?version=" + version_web)
                    .wait(function () {
                        $LAB.script("/Scripts/camera/common.js?version=" + version_web)
                            .script("/Scripts/camera/class.js?version=" + version_web)
                            .script("/Scripts/camera/plugin.js?version=" + version_web)
                            .wait(function () {
                                $LAB.script("/Scripts/camera/main.js?version=" + version_web)
                            })
                    })
            })
    </script>

    <script src="~/Scripts/Bootstrap-Table-1.5.0/bootstrap-table.min.js"></script>
    <script src="~/Scripts/Bootstrap-Table-1.5.0/locale/bootstrap-table-en-US.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#table-javascript').bootstrapTable({
                method: 'get',
                url: '/Home/GetData',
                cache: false,
                height: 400,
                striped: true,
                pagination: true,
                pageSize: 50,
                pageList: [10, 25, 50, 100, 200],
                search: true,
                showColumns: true,
                showRefresh: true,
                minimumCountColumns: 2,
                clickToSelect: true,
                columns: [{
                    field: 'Id',
                    title: '序号',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'State',
                    title: '状态',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Site',
                    title: '站点',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Camera',
                    title: '摄像机名称/ID',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Issue',
                    title: '事件类型',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Time',
                    title: '报警时间',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Video',
                    title: '事件录像',
                    align: 'center',
                    valign: 'middle',
                    sortable: true
                }, {
                    field: 'Confirm',
                    title: '确认',
                    align: 'center',
                    valign: 'middle',
                    clickToSelect: false,
                    formatter: operateFormatter,
                    events: operateEvents
                }]
            });

        });

        function operateFormatter(value, row, index) {
            return [
                '<a class="like" href="javascript:void(0)" title="Like">',
                '<i class="glyphicon glyphicon-heart"></i>',
                '</a>',
                ' <a class="edit ml10" href="javascript:void(0)" title="Edit">',
                '<i class="glyphicon glyphicon-edit"></i>',
                '</a>',
                ' <a class="remove ml10" href="javascript:void(0)" title="Remove">',
                '<i class="glyphicon glyphicon-remove"></i>',
                '</a>'
            ].join('');
        }

        window.operateEvents = {
            'click .like': function (e, value, row, index) {
                alert('You click like icon, row: ' + JSON.stringify(row));
                console.log(value, row, index);
            },
            'click .edit': function (e, value, row, index) {
                alert('You click edit icon, row: ' + JSON.stringify(row));
                console.log(value, row, index);
            },
            'click .remove': function (e, value, row, index) {
                alert('You click remove icon, row: ' + JSON.stringify(row));
                console.log(value, row, index);
            }
        };

    </script>
}